---
title: "MySQL"
date: "2025-03-03T00:00:00+09:00"   
draft: false            
author: ["김형근"]         
tags: ["Study"]      # 자유롭게
categories: ["Devlog"]
description: "복습 정리"
ShowToc: false
TocOpen: false
cover:
  image: ""               # 같은 폴더에 이미지 두고 파일명만 적기(예: cover.jpg)
  alt: ""
  relative: true
---
# 데이터베이스와 데이터베이스 시스템

## 1. 데이터, 정보, 지식

- 데이터 : 관찰의 결과로 나타난 정량적 혹은 정성적인 실제 값
- 정보 : 데이터에 의미를 부여한 것
- 지식 : 사물이나 현상에 대한 이해

## 2. 일상생활의 데이터베이스

- **데이터베이스** : 조직에 필요한 정보를 얻기 위해 논리적으로 연관된 데이터를 모아 구조적으로 통합해 놓은 것
    - 운영 데이터를 통합하여 저장하며 공용으로 사용
- **데이터베이스 시스템** : 데이터의 검색과 변경 작업을 주로 수행함
    - 변경이란, 시간에 따라 변하는 데이터 값을 데이터베이스에 반영하기 위해 수행하는 삽입, 삭제, 수정 등의 작업
- **통합 데이터(integrated data)** : 데이터를 통합하는 개념으로, 각자 사용하던 데이터의 중복을 최소화하여 중복으로 인한 데이터 불일치 현상을 제거
- **저장 데이터(store data)** : 문서로 보관된 데이터가 아니라 디스크, 테이프 같은 컴퓨터 저장장치에 저장된 데이터를 의미
- **운영 데이터(operational data)** : 조직의 목적을 위해 사용되는 데이터를 의미한다. 즉 업무를 위한 검색을 할 목적으로 저장된 데이터
- **공용 데이터(shared data)** : 한 사람 또는 한 업무를 위해 사용되는 데이터가 아니라 공동으로 사용되는 데이터를 의미

## 3. 데이터베이스의 특징

- **실시간 접근성(real time accessibility) :** 데이터베이스는 실시간으로 서비스, 사용자가 데이터를 요청하면 몇 시간이나 몇 일 뒤에 결과를 전송하는 것이 아니라 수 초 내에 결과를 서비스
- **지속적인 변화(continuous change)** : 데이터베이스에 저장된 내용은 어느 한 순간의 상태를 나타내지만, 데이터 값은 시간에 따라 항상 바뀜.
    - 데이터베이스는 `삽입(isnert)`, `삭제(delete)`, `수정(update)` 등의 작업을 통하여 바뀐 데이터 값을 저장
- **동시 공유(concurrent sharing)** : 데이터베이스는 서로 다른 업무 또는 여러 사용자에게 동시에 공유동시(concurrent)는 병행이라고도 하며, 데이터베이스에 접근하는 프로그램이 여러 개 있다는 의미
- **내용에 따른 참조(reference by content)** : 데이터베이스에 저장된 데이터는 물리적인 위치가 아니라 데이터 값에 따라 참조

## 4. 데이터베이스 시스템의 구성

- **데이터베이스 사용자**
    - 일반 사용자, 응용 프로그래머, SQL 사용자, 관리자
- **데이터베이스 시스템**
    - DBMS(데이터베이스 관리 시스템) : 사용자와 데이터베이스를 연결시켜 주는 소프트웨어
    - 데이터베이스 : 데이터를 모아 둔 토대
    - 데이터 모델 : 데이터가 저장되는 기법에 관한 내용
- 데이터베이스 시스템 심화
    - DBMS를 도입하여 데이터를 통합 관리하는 시스템
    - 데이터를 가진 쪽을 서버(server), 외부에서 데이터를 요청하는 쪽을 클라이언트(Client)
    - DBMS 서버가 파일을 다루며 데이터의 일관성 유지, 복구, 동시 접근 제어 등의 기능을 수행
    - 데이터의 중복을 줄이고 데이터를 표준화하며 무결성을 유지

## 5. 데이터베이스 언어

### 5-1. SQL(구조화된 질의 언어)

- DDL(데이터 정의어) - Create, Alter, Drop
- DML(데이터 조작어) - (Select), Insert, Update, Delete
- DCL(데이터 제어어) - Revoke, Grant
- DQL(데이터 질의어) - Select
- TCL(트랜젝처리 언어) - Commit, Rollback

### 5-2. 데이터 독립성

- **논리적 데이터 독립성(logical data independence)**
    - 외부 단계(외부 스키마)와 개념 단계(개념 스키마) 사이의 독립성
    - 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원
    - 논리적 구조가 변경되어도 응용 프로그램에는 영향이 없도록 하는 개념
    - 개념 스키마의 테이블을 생성하거나 변경하여도 외부 스키마가 직접 다루는 테이블이 아니면 영향이 없음
- **물리적 데이터 독립성(physical data independence)**
    - 개념 단계(개념 스키마)와 내부 단계(내부 스키마) 사이의 독립성
    - 저장장치 구조 변경과 같이 내부 스키마가 변경되어도 개념 스키마에 영향을 미치지 않도록 지원
    - 성능 개선을 위하여 물리적 저장 장치를 재구성할 경우 개념 스키마나 응용 프로그램 같은 외부 스키마에 영향이 없음
    - 물리적 독립성은 논리적 독립성보다 구현하기 쉬움

### 5-3. 3단계 데이터베이스 구조

![image.png](attachment:ace161f3-f188-45fc-9d7f-435386e1e8b7:image.png)

---

# MySQL 기반 SQL 1

![image.png](attachment:79315a34-b25e-4f28-a9bf-fa0770eb6dff:image.png)

---

![image.png](attachment:1732d70a-19fe-4242-b718-2f3f1528c898:image.png)

- `- 엔티티(개체), 테이블 8개`
- `- 리소스 (사원)`
- `- Employees (사원)`
- `- Jobs (직무/직급)`
- `- Departments (부서)`
- `- Job_history (발령/이동 이력)`

제약 조건은 나중에 거는게 좋다.

---

## JOIN

- 내용 작성

---

## 서브 쿼리 (부속질의)

- 두 질의어를 한 번에 작성할 수는 없을까 ?
    - 가능하다.
- SELECT 문의 WHERE 절에 또는 다른 테이블의 결과를 이용하기 위해서 다시 SELECT 문을 괄호로 묶어서 ‘부속질의’의 결과를 넘겨주는 방식
- 질의가 중첩된 다고 해서 ‘중첩질의’ `nested query` 라고도 한다.

```sql
select max(book.price)
from book;

select bookname
from book
where price = 35000;

select bookname
from book
where price = (select max(book.price) from book);
```

- 결과 테이블의 반환 형태
    - 단일행 - 단일열 → 1 x 1
    - 다중행 - 단일열 → n x 1
    - 단일행 - 다중열 → 1 x n
    - 다중행 - 단중열 → n x n

튜플변수 : 테이블 이름이 길거나, 같거나(두 번 이상 사용해야 하는 경우) 테이블 별칭을 사용하여 충동을 피한다.

가독성을 높이고 쿼리를 작성함.

```sql
select b1.bookname, b1.publisher
from book b1
where b1.price > (select avg(b2.price)
                  from book b2
                  where b2.publisher = b1.publisher);
```

### 부속질의와 조인

- 여러 테이블을 하나의 SQL 에서 다룬다는 점은 유사하나
- 차이점:
    1. 조인에서는 SELECT 문에 나오는 결과 속성을 FROM 절의 테이블에서만 얻을 수 있다.
        1. 여러 개 테이블 조져버릴 때 괜찮
    2. 한 개의 테이블에서만 얻은 여러 테이블 질의는 조인보다 부속질의로 작성하는 것이 편하다.
        1. 한 개의 테이블 안에서 조져버릴 때 괜찮